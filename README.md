# NL2Cube 智慧分析系統

## 系統簡介

NL2Cube 是一個基於自然語言查詢的智慧商業分析系統，採用 MVC 架構設計，整合了自然語言處理、時間序列預測、AI 智慧助手等功能。

## 主要功能

- **自然語言查詢**: 支援中文自然語言查詢資料庫，包含季度查詢支援
- **統一預測系統**: 整合 SARIMAX、ARIMA 等預測模型，提供專業預測圖表
- **CrewAI 智慧預測**: 多代理協作的智能預測功能
- **語音播放系統**: 支援語音播放分析報告，提升用戶體驗
- **向量搜尋 AI 分析**: 結合語義搜尋和 AI 分析，提供深度洞察
- **AI 智慧助手**: 整合 Gemini AI，提供專業的商業分析建議
- **數據可視化**: 專業的圖表展示分析結果
- **鑽取分析**: 多維度數據分析
- **n8n 自動化**: 整合 n8n 工作流程自動化

## 快速開始

### 環境要求
- Python 3.8+
- Flask
- SQLite

### 安裝依賴
```bash
# 安裝所有依賴套件
pip install -r requirements.txt

# 如果遇到安裝問題，可以嘗試：
pip install --upgrade pip
pip install -r requirements.txt --no-cache-dir

# 在虛擬環境中安裝（推薦）：
python -m venv venv
source venv/bin/activate  # Linux/macOS
venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

### 啟動系統
```bash
python app.py
```

### 訪問系統
打開瀏覽器訪問: http://localhost:5010

## 使用範例

### 自然語言查詢
- "顯示所有產品"
- "查詢客戶銷售額"
- "統計各產品銷售額"
- "顯示前10筆銷售記錄"

### 業績預測
- 月度預測
- 季度預測
- 年度預測

### AI 智慧助手
- 業務改進建議
- 趨勢分析
- 風險評估

### 統一預測系統
- 整合 SARIMAX、ARIMA 等預測模型
- 專業的 Chart.js 互動式圖表
- 歷史數據和預測數據分離顯示
- 多維度數據分析和 AI 分析整合

### CrewAI 智慧預測
- 多代理協作（數據工程師、預測分析師、業務分析師）
- 智能任務分配和流程管理
- 完整的預測流程從數據收集到結果分析

### 語音播放系統
- 支援 Google TTS 和 pyttsx3 雙引擎
- 播放速度控制（0.5x 到 2.0x）
- 自動內容提取和語音優化

### 向量搜尋 AI 分析
- 基於 ChromaDB 的語義搜尋
- 整合 Gemini AI 提供深度分析
- 支援產品、客戶、銷售事件等搜尋

## 系統架構

詳細的系統架構說明請參考: [系統架構與核心邏輯說明.md](系統架構與核心邏輯說明.md)

## 技術特色

- **MVC 架構**: 清晰的代碼結構
- **自然語言處理**: 智能查詢解析
- **統一預測邏輯**: 確保預測結果一致性
- **響應式設計**: 適配不同設備
- **模組化設計**: 易於擴展和維護

## 最近更新

### 2024年12月 - 統一預測圖表空白問題修復
- ✅ 修復了統一預測圖表頁面顯示空白的問題
- ✅ 創建了缺失的 `templates/unified_forecast.html` 模板檔案
- ✅ 確認了所有路由和模型組件正常載入
- ✅ 新增了測試頁面 `test_unified_forecast.html` 用於功能驗證

**問題原因**: 統一預測路由指向了不存在的模板檔案 `unified_forecast.html`

**解決方案**: 
1. 創建完整的統一預測模板檔案
2. 包含預測參數設定、圖表顯示、AI分析等功能
3. 整合 Chart.js 進行互動式圖表展示
4. 提供完整的錯誤處理和用戶體驗優化

## 文件說明

- `系統分析規劃書.md`: 完整的系統分析與規劃文件
- `系統使用手冊.md`: 詳細的用戶使用手冊
- `README.md`: 系統概述和快速開始指南

## 系統特色

- **專業預測圖表**: 使用 Chart.js 生成互動式預測圖表
- **智能 AI 分析**: 整合 Gemini AI 提供深度業務分析
- **語音播放功能**: 支援語音播放分析報告
- **向量搜尋分析**: 結合語義搜尋和 AI 分析
- **季度查詢支援**: 完整支援季度查詢格式
- **模組化架構**: 易於擴展和維護的系統設計

## 開發團隊

本系統採用現代化的 Web 開發技術，提供企業級的商業分析解決方案。 